/* style.css (v2) */

/* Color system */
/* Default theme: Dark */
:root {
  --bg: #1e1e1e;
  /* Panel should be slightly lighter than bg for elevation */
  --panel: #242424;
  --text: #e0e0e0;
  --muted: #9a9a9a;
  --border: #2a2a2a;
  /* Muted low-saturation accent for active underline */
  --accent: #9aa5b1;
  /* Publication thumbnail width */
  --thumb: 200px;
  /* Publication thumbnail max height to avoid tall cards */
  --thumb-max-h: 160px;
}

/* Light theme overrides */
html.theme-light {
  --bg: #ffffff;
  --panel: #f7f7f8;
  --text: #1f2328;
  --muted: #637381;
  --border: #e6e8eb;
  --accent: #2a6fdb;
}


/* Import Montserrat from Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

body {
  margin: 0;
  background-color: var(--bg);
  color: var(--text);
  /* Restore original font preference */
  font-family: 'Courier New','Montserrat', sans-serif;
  line-height: 1.55;
  transition: background-color .25s ease, color .25s ease;
}

.container {
  display: flex;
  min-height: 100vh;
  gap: 0.8rem; /* control space between sidebar and content */
}
/* Quote uses theme variables */
.about-section blockquote.about-quote {
  margin: 1rem 0;
  padding: 0.8rem 1rem;
  border-left: 4px solid var(--accent);
  background: var(--panel);
  color: var(--text);
  font-style: italic;
}
.about-section blockquote.about-quote cite {
  display: block;
  margin-top: 0.4rem;
  color: var(--muted);
  font-style: normal;
}
nav {
  width: 200px; /* widened left sidebar */
  padding: 2rem;
  background: var(--bg);
  border-right: 1px solid var(--border);
  position: sticky; /* follow on scroll (desktop) */
  top: 0;
  align-self: flex-start;
  max-height: 100vh; /* avoid overflow on short viewports */
  overflow: auto;
  transition: background-color .25s ease, border-color .25s ease, color .25s ease;
}

/* Avatar image in left nav */
.nav-avatar {
  display: block;
  width: 100%;         /* Fill the nav content width */
  max-width: 140px;    /* Slightly larger logo/avatar */
  height: auto;
  border-radius: 8px;  /* Slightly rounded corners; remove if undesired */
  margin: 0 auto 0.8rem auto; /* Center avatar in the sidebar */
}

nav h1 {
  font-size: 1.1rem;
  margin: 0.2rem 0 1.6rem; /* tighten space above and below */
  text-align: center;       /* center the name under avatar */
}

nav ul {
  list-style: none;
  padding: 0;
}

nav li {
  margin-bottom: 0rem;
}

/* Base link style */
a {
  color: var(--text);
  text-decoration: underline;
  text-decoration-color: color-mix(in oklab, var(--text), transparent 40%);
  text-underline-offset: 3px;
  text-decoration-thickness: 0.06em;
  transition: color .25s ease, text-decoration-color .25s ease;
}

a:hover {
  text-decoration-color: var(--text);
}

nav a {
  color: var(--text);
  text-decoration: none;
}

nav a[data-page] {
  font-size: 1rem; /* 增大导航链接字体 */
}

nav a:hover {
  text-decoration: underline;
  text-decoration-color: var(--text);
}

/* active nav item */
nav a.active {
  text-decoration: underline;
  text-decoration-color: var(--accent);
  font-weight: 600;
}

.nav-btn {
  display: block;
  color: var(--text);
  text-decoration: none;
  font-size: 0.9rem;
  cursor: pointer; /* 添加这一行确保显示手型指针 */
}

.nav-btn:hover {
  text-decoration: underline;
  text-decoration-color: var(--text); /* 悬停时的下划线颜色 */
}

main {
  flex: 1;
  padding: 2rem; /* symmetric padding; gap controls column spacing */
  max-width: 920px;
  margin: 0 auto;
  transition: color .25s ease, background-color .25s ease;
}

/* Theme toggle button */
.theme-toggle {
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 1000;
  padding: 8px 12px; /* accommodate larger icon */
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--text);
  font-size: 1.05rem; /* emoji size */
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  transition: background-color .25s ease, color .25s ease, border-color .25s ease, transform .2s ease;
}
.theme-toggle svg { width: 1.35rem; height: 1.35rem; display: block; fill: currentColor; stroke: currentColor; }
.theme-toggle:hover { filter: brightness(1.05); }
.theme-toggle:active { transform: scale(0.97); }

/* Card and quote smooth transitions */
.publication,
.about-section blockquote.about-quote {
  transition: background-color .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    transition: none !important;
  }
}

.fade {
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .fade {
    animation: none;
  }
}

/* 为publications页面添加样式 */
.pub-year {
  color: #c8c8c8;            /* deeper than muted for readability */
  font-size: 1.08rem;        /* slightly larger */
  font-weight: 600;          /* slightly bolder */
  letter-spacing: 0.02em;
  margin: 1.1rem 0 0.5rem;
}

.publication {
  background: var(--panel);
  border-radius: 10px;
  padding: 1rem; /* symmetric top/bottom padding */
  margin-bottom: 1rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
  display: flow-root; /* establish BFC to self-clear float */
}

.publication h4 {
  margin-top: 0;           /* remove extra gap at card top */
  margin-bottom: 0.45rem;
  color: var(--text);
}

/* Title link: clean look, underline only on hover */
.publication h4 a {
  text-decoration: none;
}
.publication h4 a:hover {
  text-decoration: underline;
}

.publication p {
  margin: 0.3rem 0;
  line-height: 1.5;
}

/* Ensure symmetric spacing: no extra bottom margin from last child */
.publication > :last-child {
  margin-bottom: 0;
}

/* Publication with right-side thumbnail */
.pub-text { min-width: 0; }
.pub-thumb {
  float: right;
  width: min(var(--thumb), 45%);
  max-width: 100%;
  margin: 0 0 0.3rem 1rem; /* spacing from text */
}
.pub-thumb img {
  display: block;
  width: auto;
  max-width: 100%;
  height: auto;                 /* preserve intrinsic ratio */
  max-height: var(--thumb-max-h); /* prevent very tall portraits */
  margin: 0 auto;               /* center when narrower */
  border-radius: 8px;
  object-fit: contain;          /* never crop */
}

/* Home page tweaks */
.inline-cite {
  white-space: nowrap; /* keep dash and text together */
  color: var(--muted);
}
.home-figure {
  float: right;
  width: min(44%, 420px);
  margin-left: 1rem;
  margin-bottom: 1rem;
}
.home-figure img {
  display: block;
  width: 100%;
  height: auto;
  border-radius: 6px;
}
.home-figure figcaption {
  text-align: center;
  font-size: 0.9rem;
  color: var(--muted);
  margin-top: 0.4rem;
}
/* (quote block removed per request) */

/* Weaken author and venue lines just under title */
.publication h4 + p,
.publication h4 + p + p {
  color: var(--muted);
}

.publication a {
  color: var(--text);
  text-decoration: none;
  margin-right: 1rem;
}

.publication a:hover {
  text-decoration: underline;
}

.teaching, .project {
  margin-bottom: 1.5rem;
}

/* Removed conflicting main/publication link overrides to unify style */

/* For links within the "About Me" section content that you just provided: */
.about-section a {
  color: #808080; /* Specifically target links within the about section */
}

.about-section a:hover {
  text-decoration-color: #C0C0C0; /* Hover color for about section links */
}


h4 {
  /* Reduce the space *below* the h4 heading */
  margin-bottom: 0.5rem; /* You can try even smaller values like 0.25rem or 0 */
  /* If you want the font size of h4 to be slightly larger than regular text but smaller than h3,
     you can set it here if you haven't already: */
  /* font-size: 1.1rem; */
}

/* --- Specific adjustments for ul and p tags after h4 (if needed) --- */

/* This targets an unordered list directly following an h4 */
h4 + ul {
  margin-top: 0; /* Remove or reduce the space *above* the list */
}

/* This targets a paragraph directly following an h4 (e.g., in "Other Papers") */
h4 + p {
  margin-top: 0; /* Remove or reduce the space *above* the paragraph */
}

/* If you have .publication divs, you might want to adjust space for h4 within them too if they exist.
   Based on your latest "Publications" code, the h4 is inside the .publication div already,
   so the general h4 rule should apply. */

/* Also check the spacing around .publication and .teaching divs */
.publication,
.teaching,
.project {
  margin-bottom: 1rem; /* You can reduce this further if needed, e.g., 0.5rem */
}

@media (max-width: 768px) {
  .container {
    flex-direction: column; /* 在小屏幕上，将导航和主内容垂直堆叠 */
    padding-left: 12px;   /* 对称左右留白，避免视觉偏左 */
    padding-right: 12px;
  }

  nav {
    width: 100%; /* 导航栏占据全部宽度 */
    padding: 1rem; /* 调整内边距，使其在顶部时更合理 */
    text-align: center; /* 导航项居中显示 */
    position: static; /* disable sticky on mobile */
    top: auto;
    align-self: stretch;
  }

  /* Tweak avatar size on small screens */
  .nav-avatar {
    max-width: 100px;
    margin-bottom: 0.8rem;
  }

  nav h1 {
    margin-bottom: 1rem; /* 调整标题下边距 */
  }

  nav ul {
    display: flex; /* 让导航链接水平排列 */
    justify-content: center; /* 导航链接居中 */
    flex-wrap: wrap; /* 如果链接太多，允许换行 */
  }

  nav li {
    margin: 0 0.8rem 0.5rem 0.8rem; /* 调整列表项间距，使其水平分布 */
  }

  nav a[data-page] {
    font-size: 0.9rem; /* 导航链接字体可以适当减小 */
  }

  .nav-btn {
    display: inline-block; /* 让按钮水平排列 */
    margin: 0 0.5rem 0.5rem 0.5rem; /* 调整按钮间距 */
  }

  main {
    padding: 1rem; /* 调整主内容区内边距 */
    width: 100%;
    max-width: 920px;
    margin-left: auto;  /* 居中主内容，防止视觉偏左 */
    margin-right: auto;
  }

  /* 如果你的 .paper-box 布局是两列或多列，也需要调整为单列 */
  .paper-box {
    flex-direction: column; /* 假设 .paper-box 也是 flex 布局 */
    align-items: center; /* 内容居中 */
  }

  .pub-thumb {
    float: none;
    width: 100%;
    max-width: none;
    margin: 0 0 0.6rem 0;
  }

  .paper-box-image {
    width: 80%; /* 图片在小屏幕上宽度可以更大 */
    margin-bottom: 1rem; /* 图片下方增加间距 */
  }

  .paper-box-text {
    width: 100%; /* 文本区域占据全部宽度 */
    padding: 0; /* 移除左右内边距 */
  }

  /* 调整其他可能需要改变的元素，如图片、表格等 */
  img {
    max-width: 100%; /* 确保图片不会超出其容器 */
    height: auto; /* 保持图片比例 */
  }

  /* iOS 等安全区适配，避免贴边引起的偏左/偏右视觉问题 */
  body {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  .theme-toggle {
    right: max(12px, env(safe-area-inset-right));
  }

  /* On small screens, stack the figure naturally */
  .home-figure {
    float: none;
    width: 100%;
    margin: 0 0 1rem 0;
  }
}


.publication p {
  line-height: 1.2; /* Reduce line height. Default is usually around 1.5-1.6. Try 1.2, 1.3, or 1.4 */
  margin-top: 0.3rem; /* Reduce top margin for paragraphs */
  margin-bottom: 0.3rem; /* Reduce bottom margin for paragraphs */
  /* You can even try smaller margins like 0.1rem or 0.2rem if you want them very close */
}

/* Slightly larger thumbnails on very wide screens */
@media (min-width: 1280px) {
  :root { --thumb: 220px; --thumb-max-h: 200px; }
}

/* Adjust the margin of the h4 within the publication box if needed */
.publication h4 {
  margin-top: 0; /* Tighter top spacing inside card */
  margin-bottom: 0.45rem;
}

/* Also, reconsider the overall bottom margin of each publication entry if they are too far apart */
.publication {
  margin-bottom: 1rem; /* Card spacing */
  padding-bottom: 1rem; /* Match top padding for symmetry */
}

/* Ensure list items within publications (if any, though not in your current snippet) also have tight spacing */
.publication ul {
  padding-left: 1.2em; /* Adjust left padding for lists */
  margin-top: 0.3rem;
  margin-bottom: 0.3rem;
}

.publication ul li {
  margin-bottom: 0.2rem; /* Spacing between list items */
}

/* Specific adjustment for the general "Publications & Preprints" heading */
h3 {
  margin-bottom: 1rem; /* Adjust space below this main heading */
}

/* And the small text below the main heading */
.publications-page p:first-of-type { /* Assuming this is the p tag for "(*) represents equal contribution" */
  margin-top: 0.5rem;
  margin-bottom: 1.5rem; /* Adjust as needed */
}

/* Tighter spacing between h3 and its immediate explanatory paragraph */
h3 + p {
  margin-top: 0.4rem;
  margin-bottom: 0.8rem;
  color: var(--muted);
}
